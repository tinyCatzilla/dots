"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PushOnceCompiler = void 0;
const stringSplitter_1 = require("../../parser/stringSplitter");
class PushOnceCompiler {
    constructor(idResolver) {
        this.idResolver = idResolver;
    }
    setIdResolver(idResolver) {
        this.idResolver = idResolver;
    }
    compile(node) {
        const directive = node, params = stringSplitter_1.StringSplitter.fromText(directive.getInnerContent());
        let viewName = params[0].trim(), id = '';
        if (params.length == 1) {
            id = "'" + this.idResolver.id(directive) + "'";
        }
        else if (params.length == 2) {
            id = params[1].trim();
        }
        return `<?php if (! $__env->hasRenderedOnce(${id})): $__env->markAsRenderedOnce(${id});
$__env->startPush(${viewName}); ?>`;
    }
}
exports.PushOnceCompiler = PushOnceCompiler;
//# sourceMappingURL=pushOnce.js.map