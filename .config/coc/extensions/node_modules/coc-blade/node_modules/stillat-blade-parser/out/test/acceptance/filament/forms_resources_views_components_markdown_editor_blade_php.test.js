"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const assert_1 = __importDefault(require("assert"));
const utils_1 = require("../../../formatting/prettier/utils");
const stringUtilities_1 = require("../../../utilities/stringUtilities");
suite('Pint Transformer Acceptance: forms_resources_views_components_markdown_editor_blade_php', () => {
    test('pint: it can format forms_resources_views_components_markdown_editor_blade_php', () => {
        const input = `<x-dynamic-component
    :component="$getFieldWrapperView()"
    :field="$field"
>
    @php
        $id = $getId();
        $statePath = $getStatePath();
    @endphp

    @unless ($isDisabled())
        <div
            x-ignore
            ax-load="visible"
            ax-load-src="{{ \\Filament\\Support\\Facades\\FilamentAsset::getAlpineComponentSrc('markdown-editor', 'filament/forms') }}"
            x-data="markdownEditorFormComponent({
                placeholder: @js($getPlaceholder()),
                state: $wire.{{ $applyStateBindingModifiers("entangle({$statePath})") }},
                toolbarButtons: @js($getToolbarButtons()),
                translations: @js(__('filament-forms::components.markdown_editor')),
                uploadFileAttachmentUsing: async (file, onSuccess, onError) => {
                    $wire.upload(\`componentFileAttachments.{{ $statePath }}\`, file, () => {
                        $wire.getFormComponentFileAttachmentUrl('{{ $statePath }}').then((url) => {
                            if (! url) {
                                return onError()
                            }

                            onSuccess(url)
                        })
                    })
                },
            })"
            wire:ignore
            {{
                $attributes
                    ->merge($getExtraAttributes(), escape: false)
                    ->merge($getExtraAlpineAttributes(), escape: false)
                    ->class(['filament-forms-markdown-editor-component font-mono'])
            }}
        >
            <textarea x-ref="editor" class="hidden"></textarea>
        </div>
    @else
        <div class="prose block w-full max-w-none rounded-lg border border-gray-300 bg-white p-3 opacity-70 shadow-sm dark:prose-invert dark:border-gray-600 dark:bg-gray-700">
            {!! str($getState())->markdown()->sanitizeHtml() !!}
        </div>
    @endunless
</x-dynamic-component>
`;
        const output = `<x-dynamic-component :component="$getFieldWrapperView()" :field="$field">
    @php
        $id = $getId();
        $statePath = $getStatePath();
    @endphp

    @unless ($isDisabled())
        <div
            x-ignore
            ax-load="visible"
            ax-load-src="{{ \\Filament\\Support\\Facades\\FilamentAsset::getAlpineComponentSrc('markdown-editor', 'filament/forms') }}"
            x-data="markdownEditorFormComponent({
                        placeholder: @js($getPlaceholder()),
                        state: $wire.{{ $applyStateBindingModifiers("entangle({$statePath})") }},
                        toolbarButtons: @js($getToolbarButtons()),
                        translations: @js(__('filament-forms::components.markdown_editor')),
                        uploadFileAttachmentUsing: async (file, onSuccess, onError) => {
                            $wire.upload(\`componentFileAttachments.{{ $statePath }}\`, file, () => {
                                $wire
                                    .getFormComponentFileAttachmentUrl('{{ $statePath }}')
                                    .then((url) => {
                                        if (! url) {
                                            return onError()
                                        }

                                        onSuccess(url)
                                    })
                            })
                        },
                    })"
            wire:ignore
            {{
                $attributes
                    ->merge($getExtraAttributes(), escape: false)
                    ->merge($getExtraAlpineAttributes(), escape: false)
                    ->class(['filament-forms-markdown-editor-component font-mono'])
            }}
        >
            <textarea x-ref="editor" class="hidden"></textarea>
        </div>
    @else
        <div
            class="prose dark:prose-invert block w-full max-w-none rounded-lg border border-gray-300 bg-white p-3 opacity-70 shadow-sm dark:border-gray-600 dark:bg-gray-700"
        >
            {!! str($getState())->markdown()->sanitizeHtml() !!}
        </div>
    @endunless
</x-dynamic-component>
`;
        assert_1.default.strictEqual(stringUtilities_1.StringUtilities.normalizeLineEndings((0, utils_1.formatBladeStringWithPint)(input).trim()), stringUtilities_1.StringUtilities.normalizeLineEndings(output.trim()));
        assert_1.default.strictEqual(stringUtilities_1.StringUtilities.normalizeLineEndings((0, utils_1.formatBladeStringWithPint)(output).trim()), stringUtilities_1.StringUtilities.normalizeLineEndings(output.trim()));
    }).timeout(30000);
});
//# sourceMappingURL=forms_resources_views_components_markdown_editor_blade_php.test.js.map